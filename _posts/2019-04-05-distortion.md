# 写在前面的话

第一次写技术博客，好不容易会了一点Markdown，但是编辑水平实在太烂，就直接上图了，见谅……toc

# VR畸变如何校正

畸变校正离不开坐标系的转换，我们先来灌一桶基础知识。

#### 坐标系的转换

- 二维坐标系的旋转  

    一个二维坐标系Oxy，顺时针旋转α，变为Ox'y'坐标系，公式如下：  
    ![](https://github.com/liuliutu/liuliutu.github.io/blob/master/img/201904051436.JPG "二维坐标系旋转矩阵表达式")  
    
- 三维坐标系的旋转

    一个三维坐标系Oxyz，可以参考[此处博客](https://blog.csdn.net/humanking7/article/details/44756073)，但里面讲到三维旋转的时候，不知为什么举的例子都是逆时针（当转轴垂直纸面向外的时候），此处手动推导先绕Oz顺时针旋转α，再绕Oy顺时针旋转β，最后绕Ox顺时针旋转γ，所得的旋转矩阵R的表达式为：  
    ![](https://github.com/liuliutu/liuliutu.github.io/blob/master/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190405155108.jpg)
    
    此处产生几个疑问自问自答了：  
    
    - *如果指定轴的旋转角度是的指定的，旋转结果是否和旋转顺序有关系？*    
        是肯定的，实际用手或者带直角的东西比划一下，顺序不同，结果大不同。  
        
    - *看最终公式先z，后y，再x绕，为何？*  
        可以不必视先z后y再x，可以换顺序，只是最先旋转的轴，它的旋转矩阵要最先左乘，最后旋转的轴，它的旋转矩阵要最后左乘而已。[这篇博客](https://blog.csdn.net/Peng___Peng/article/details/51725219)也是讲旋转矩阵的，可以参考。  
        
    - *查坐标变换资料时，发现[这篇博客](https://blog.csdn.net/zsq306650083/article/details/50561857)讲了坐标的转换还包括缩放和平移，且一般遵循缩放->旋转->平移的顺序，这是为什么？*  
        缩放和平移交换顺序会产生不同效果（这里缩放单指以原点为定点的缩放），除了上述，这里感觉更多考虑的是人的认知习惯。接下来就会讲到它的表达方式。  

- 坐标变换的矩阵表示  

    坐标变换除了旋转，还有缩放和平移，这两个概念都好理解，但顺序还是需要注意的，因为缩放是以原点为不动点，将坐标值放大或缩小，因此平移对它是有影响的，一般平移的变换放在最后比较好。关于旋转缩放平移的矩阵表示，[此博客](https://www.jianshu.com/p/ac1b34420be7)讲的比较易懂，惭愧的是，基础太差逆变换没看懂……能理解的基本就是，如果三维表示的话，先S和R左乘，再加一个T的向量就OK，如果四维表示，则一个矩阵左乘搞定，如下图：  
    ![](https://github.com/liuliutu/liuliutu.github.io/blob/master/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190405172550.jpg)
    
    自问自答模式开启：
    
    - *四维矩阵形式M将RST整合到一个矩阵中，数学描述上看更简洁，但物理意义怎么理解*  
        参考[此博客](http://www.cnblogs.com/csyisong/archive/2008/12/09/1351372.html)，虽然不能完全懂，但是好像能理解一丢丢。  
        
     
    

# END
